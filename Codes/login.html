<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login - AgrowBloom Essentials</title>
<link rel="stylesheet" href="../styles.css">
</head>
<body>
<div class="login-container">

    <form id="loginForm">
        <label for="username">Username</label>
        <input type="text" id="username" name="username" placeholder="Enter username">

        <label for="password">Password</label>
        <input type="password" id="password" name="password" placeholder="Enter password">

        <p id="errorMsg" class="error"></p>

        <button type="submit" id="loginBtn">Login</button>
    </form>

    <p class="register-text">
        Don't have an account?
        <a href="register.html" class="register-link">Register here</a>
    </p>
</div>

<script>
// Login form handling

const loginForm = document.getElementById("loginForm");
const errorMsg = document.getElementById("errorMsg");

loginForm.addEventListener("submit", function(e) {
    e.preventDefault();

    const username = document.getElementById("username").value.trim();
    const password = document.getElementById("password").value.trim();

    // Get account info stored from the registration page
    const savedUsername = localStorage.getItem("regUsername");
    const savedPassword = localStorage.getItem("regPassword");

    // Validation for empty inputs
    if (username === "" || password === "") {
        errorMsg.textContent = "All fields are required.";
        return;
    }

    // Compare credentials 
    if (username === savedUsername && password === savedPassword) {
        alert("Login successful!");
        window.location.href = "products.html"; 
    } else {
        errorMsg.textContent = "Invalid username or password.";
    }
});
</script>
</body>
</html>
